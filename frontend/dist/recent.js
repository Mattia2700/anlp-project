import{d as g,r as c,f,c as l,F as h,g as y,a as o,t as r,o as u,p as w,b as S,_ as I,e as b}from"./_plugin-vue_export-helper.js";const i=s=>(w("data-v-9e0e5411"),s=s(),S(),s),k=i(()=>o("h1",null,"In the last 7 days you listened to:",-1)),A=i(()=>o("div",{class:"spacer"},null,-1)),B=i(()=>o("h2",null,"From the lyrics your mood seems to be",-1)),F={class:"upper"},j=g({__name:"App",setup(s){const a=c([]),t=c("..."),d=c(0);f(async()=>{const p=new URLSearchParams(window.location.search).get("code");a.value=await fetch(`/api/recent?code=${p}`).then(e=>e.json()).then(e=>e.songs),d.value=setInterval(_,1e3),await m().then(e=>e.json()).then(e=>{clearInterval(d.value),t.value=e.mood})});function _(){t.value.includes(".")&&(t.value.length>=3?t.value=".":t.value+=".")}async function m(){return await fetch("/api/mood",{method:"POST",body:JSON.stringify({songs:a.value})})}function v(){window.location.href=`http://localhost:5000/suggest?mood=${t.value}`}return(p,e)=>(u(),l(h,null,[k,(u(!0),l(h,null,y(a.value,n=>(u(),l("h3",{key:n},r(n[0])+" - "+r(n[1]),1))),128)),A,B,o("h1",F,r(t.value),1),o("button",{onClick:v},"Suggest me other songs")],64))}}),x=I(j,[["__scopeId","data-v-9e0e5411"]]);b(x).mount("#app");
